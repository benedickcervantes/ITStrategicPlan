<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Current State Analysis</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&amp;family=Roboto:wght@300;400;500&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script><style>
        * {
            box-sizing: border-box;
        }
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        @media (max-width: 768px) {
            html, body {
                overflow: auto !important;
                height: auto !important;
                display: block !important;
                -webkit-overflow-scrolling: touch;
            }
        }
        .slide {
            width: 100vw;
            height: 100vh;
            max-width: 1280px;
            max-height: 720px;
            position: relative;
            transform-origin: center center;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            will-change: transform, opacity, filter;
        }
        
        @keyframes slideInFromRight {
            0% {
                opacity: 0;
                transform: translateX(100vw) scale(0.98);
                filter: blur(8px) brightness(0.95);
            }
            60% {
                opacity: 0.9;
                filter: blur(3px) brightness(0.98);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
                filter: blur(0px) brightness(1);
            }
        }
        
        @keyframes slideInFromLeft {
            0% {
                opacity: 0;
                transform: translateX(-100vw) scale(0.98);
                filter: blur(8px) brightness(0.95);
            }
            60% {
                opacity: 0.9;
                filter: blur(3px) brightness(0.98);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
                filter: blur(0px) brightness(1);
            }
        }
        
        .slide.slide-out-left {
            animation: slideOutLeft 0.7s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
        }
        
        .slide.slide-out-right {
            animation: slideOutRight 0.7s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
        }
        
        @keyframes slideOutLeft {
            0% {
                opacity: 1;
                transform: translateX(0) scale(1);
                filter: blur(0px) brightness(1);
            }
            40% {
                opacity: 0.8;
                filter: blur(3px) brightness(0.98);
            }
            100% {
                opacity: 0;
                transform: translateX(-100vw) scale(0.98);
                filter: blur(8px) brightness(0.95);
            }
        }
        
        @keyframes slideOutRight {
            0% {
                opacity: 1;
                transform: translateX(0) scale(1);
                filter: blur(0px) brightness(1);
            }
            40% {
                opacity: 0.8;
                filter: blur(3px) brightness(0.98);
            }
            100% {
                opacity: 0;
                transform: translateX(100vw) scale(0.98);
                filter: blur(8px) brightness(0.95);
            }
        }
        
        .slide.slide-in-from-right {
            animation: slideInFromRight 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        
        .slide.slide-in-from-left {
            animation: slideInFromLeft 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @media (min-aspect-ratio: 16/9) {
            .slide {
                width: calc(100vh * 16 / 9);
                height: 100vh;
            }
        }
        @media (max-aspect-ratio: 16/9) {
            .slide {
                width: 100vw;
                height: calc(100vw * 9 / 16);
            }
        }
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            
            html, body {
                overflow: auto !important;
                height: auto !important;
                -webkit-overflow-scrolling: touch;
                position: relative;
            }
            .slide {
                width: 100vw;
                height: auto !important;
                min-height: 100vh;
                max-width: 100%;
                max-height: none !important;
                padding: clamp(12px, 3vw, 20px) !important;
                overflow: visible !important;
                display: block !important;
            }
            .grid-cols-2 {
                grid-template-columns: 1fr !important;
            }
            .grid-cols-3 {
                grid-template-columns: 1fr !important;
            }
            .grid-cols-5 {
                grid-template-columns: 1fr !important;
            }
            .budget-card, .category-card, .issue-card, .risk-card, .goal-card, .phase-card, .inventory-card, .info-card {
                padding: clamp(12px, 3vw, 20px) !important;
                margin-bottom: 12px;
            }
            h1, h2 {
                margin-bottom: clamp(8px, 2vw, 16px) !important;
            }
            .mb-8 {
                margin-bottom: clamp(16px, 4vw, 32px) !important;
            }
            .mb-4 {
                margin-bottom: clamp(12px, 3vw, 20px) !important;
            }
            .gap-8 {
                gap: clamp(12px, 3vw, 24px) !important;
            }
            .gap-6 {
                gap: clamp(10px, 2.5vw, 20px) !important;
            }
            .gap-4 {
                gap: clamp(8px, 2vw, 16px) !important;
            }
            table {
                font-size: clamp(9px, 2.5vw, 12px) !important;
                display: block;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                white-space: nowrap;
            }
            table thead, table tbody {
                display: table;
                width: 100%;
            }
            .nav-container {
                bottom: 12px;
                padding: 8px 14px;
                gap: 8px;
                width: auto;
                max-width: calc(100% - 24px);
            }
            .nav-button {
                padding: 10px 14px;
                font-size: 0.875rem;
                min-height: 44px;
                min-width: 44px;
                touch-action: manipulation;
            }
            .page-indicator {
                font-size: 0.875rem;
                padding: 0 8px;
            }
            .icon-container {
                width: clamp(36px, 8vw, 50px) !important;
                height: clamp(36px, 8vw, 50px) !important;
            }
        }
        @media (max-width: 480px) {
            .slide {
                padding: 10px !important;
            }
            h1 {
                font-size: clamp(18px, 7vw, 24px) !important;
                line-height: 1.2;
            }
            h2 {
                font-size: clamp(16px, 6vw, 20px) !important;
            }
            .text-4xl {
                font-size: clamp(20px, 8vw, 28px) !important;
            }
            .text-3xl {
                font-size: clamp(18px, 7vw, 24px) !important;
            }
            .text-2xl {
                font-size: clamp(16px, 6vw, 20px) !important;
            }
            .text-xl {
                font-size: clamp(14px, 5vw, 18px) !important;
            }
            .nav-container {
                flex-wrap: wrap;
                width: calc(100% - 20px);
                max-width: 100%;
                bottom: 8px;
                padding: 6px 12px;
            }
            .nav-button {
                padding: 8px 12px;
                font-size: 0.8rem;
                flex: 1;
                min-width: auto;
            }
            .page-indicator {
                width: 100%;
                text-align: center;
                order: -1;
                padding: 4px 0;
            }
            .budget-card, .category-card {
                padding: 12px !important;
            }
            table {
                font-size: clamp(8px, 2vw, 11px) !important;
            }
        }
        @media (max-width: 480px) and (orientation: landscape) {
            .slide {
                padding: 8px !important;
            }
            .mb-8 {
                margin-bottom: 12px !important;
            }
            .mb-4 {
                margin-bottom: 8px !important;
            }
        }
        .nav-container {
                bottom: 12px;
                padding: 6px 16px;
                gap: 6px;
            }
            .nav-button {
                padding: 8px 12px;
                font-size: 0.85rem;
                min-height: 44px; /* Better touch target */
            }
            .page-indicator {
                font-size: 0.85rem;
                padding: 0 10px;
            }
        }
        @media (max-width: 480px) {
            .slide {
                padding: 12px !important;
            }
            h1 {
                font-size: clamp(20px, 6vw, 28px) !important;
            }
            .nav-container {
                flex-wrap: wrap;
                width: calc(100% - 24px);
                max-width: 320px;
            }
        }
        h1 {
            font-family: 'Montserrat', sans-serif;
        }
        .category-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .category-card:hover {
            transform: translateY(-5px);
        }
        .icon-container {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    
html {
    overflow: hidden;
}
        .nav-container {
            position: fixed;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(47, 62, 70, 0.85);
            padding: 4px 12px;
            border-radius: 20px;
            backdrop-filter: blur(8px);
        }
        .nav-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 4px 10px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .nav-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-1px);
        }
        .nav-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        .page-indicator {
            color: white;
            font-weight: 500;
            font-size: 0.75rem;
            padding: 0 8px;
        }
</style>
</head>
<body>
<div class="slide bg-gradient-to-br from-[#E0E1DD] to-[#EE6C4D]/10" style="padding: clamp(20px, 2.5vw, 40px);">
<!-- Header -->
<div class="mb-4 flex-shrink-0">
<h1 class="font-bold text-[#2F3E46] mb-2" style="font-size: clamp(20px, 2.5vw, 32px);">Current State Analysis</h1>
<div class="h-1 bg-[#F4A261] rounded" style="width: clamp(80px, 10vw, 128px);"></div>
</div>
<!-- Main Content -->
<div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-4 min-h-0 overflow-hidden">
<!-- Performance Bottlenecks -->
<div class="category-card p-4 flex flex-col min-h-0 overflow-y-auto">
<div class="flex items-center mb-3 flex-shrink-0">
<div class="icon-container bg-[#006D77] text-white mr-3 flex items-center justify-center" style="width: clamp(40px, 4vw, 60px); height: clamp(40px, 4vw, 60px);">
<i class="fas fa-tachometer-alt" style="font-size: clamp(16px, 2vw, 24px);"></i>
</div>
<h2 class="font-bold text-[#2F3E46]" style="font-size: clamp(14px, 1.6vw, 20px);">Performance Bottlenecks</h2>
</div>
<div class="flex-grow mb-3" style="font-size: clamp(10px, 1.1vw, 14px); line-height: 1.5;">
<div class="mb-3">
<p class="text-[#2F3E46] font-semibold mb-1">RAM Deficiency (17 units)</p>
<p class="text-[#2F3E46] text-xs">Operating with only 8GB RAM, causing application crashes and limiting multitasking. Modern applications require 16GB minimum.</p>
</div>
<div class="mb-3">
<p class="text-[#2F3E46] font-semibold mb-1">Storage Issues (14 units)</p>
<p class="text-[#2F3E46] text-xs">HDD or low-capacity SSD causing 5-10 minute boot times and slow application loading (2-5 minutes per app).</p>
</div>
<div class="bg-[#006D77]/10 p-2 rounded text-xs text-[#006D77]">
<strong>Impact:</strong> Estimated 15-20% productivity loss due to system lag and wait times
</div>
</div>
<div class="mt-auto flex-shrink-0">
<div class="w-full" id="performance-chart" style="height: clamp(80px, 12vh, 100px);"></div>
</div>
</div>
<!-- Security &amp; Compliance Risks -->
<div class="category-card p-4 flex flex-col min-h-0 overflow-y-auto">
<div class="flex items-center mb-3 flex-shrink-0">
<div class="icon-container bg-[#EE6C4D] text-white mr-3 flex items-center justify-center" style="width: clamp(40px, 4vw, 60px); height: clamp(40px, 4vw, 60px);">
<i class="fas fa-shield-alt" style="font-size: clamp(16px, 2vw, 24px);"></i>
</div>
<h2 class="font-bold text-[#2F3E46]" style="font-size: clamp(14px, 1.6vw, 20px);">Security &amp; Compliance Risks</h2>
</div>
<div class="flex-grow mb-3" style="font-size: clamp(10px, 1.1vw, 14px); line-height: 1.5;">
<div class="mb-3">
<p class="text-[#2F3E46] font-semibold mb-1">Unlicensed Software (16 systems)</p>
<p class="text-[#2F3E46] text-xs">Windows and Microsoft Office running without valid licenses, exposing company to legal penalties and security vulnerabilities from unpatched systems.</p>
</div>
<div class="mb-3">
<p class="text-[#2F3E46] font-semibold mb-1">Critical UPS Failure</p>
<p class="text-[#2F3E46] text-xs">Server UPS protecting Fujitsu Primergy RX1330 M3 is failing - IMMEDIATE replacement required to prevent data loss and server downtime.</p>
</div>
<div class="bg-[#EE6C4D]/10 p-2 rounded text-xs text-[#EE6C4D]">
<strong>Risk Level:</strong> HIGH - Legal exposure, data loss risk, and potential business interruption
</div>
</div>
<div class="mt-auto flex-shrink-0">
<div class="w-full" id="security-chart" style="height: clamp(80px, 12vh, 100px);"></div>
</div>
</div>
<!-- Infrastructure Deficiencies -->
<div class="category-card p-4 flex flex-col min-h-0 overflow-y-auto">
<div class="flex items-center mb-3 flex-shrink-0">
<div class="icon-container bg-[#F4A261] text-white mr-3 flex items-center justify-center" style="width: clamp(40px, 4vw, 60px); height: clamp(40px, 4vw, 60px);">
<i class="fas fa-network-wired" style="font-size: clamp(16px, 2vw, 24px);"></i>
</div>
<h2 class="font-bold text-[#2F3E46]" style="font-size: clamp(14px, 1.6vw, 20px);">Infrastructure Deficiencies</h2>
</div>
<div class="flex-grow mb-3" style="font-size: clamp(10px, 1.1vw, 14px); line-height: 1.5;">
<div class="mb-2">
<p class="text-[#2F3E46] font-semibold mb-1">Display Issues (18 users)</p>
<p class="text-[#2F3E46] text-xs">18 defective monitors requiring upgrade. Existing monitors can be repurposed as second screens.</p>
</div>
<div class="mb-2">
<p class="text-[#2F3E46] font-semibold mb-1">Printer Problems (2 units)</p>
<p class="text-[#2F3E46] text-xs">2 printers with connectivity issues need replacement, affecting 5 workstations.</p>
</div>
<div class="mb-2">
<p class="text-[#2F3E46] font-semibold mb-1">Network Infrastructure (18 users)</p>
<p class="text-[#2F3E46] text-xs">Unlabeled cables, shared ports (3-4 users per port), and patch panel at full capacity causing bandwidth competition.</p>
</div>
<div class="bg-[#F4A261]/10 p-2 rounded text-xs text-[#F4A261]">
<strong>Impact:</strong> Interrupted workflows, slow data transfers, increased troubleshooting time
</div>
</div>
<div class="mt-auto flex-shrink-0">
<div class="w-full" id="infrastructure-chart" style="height: clamp(100px, 14vh, 120px);"></div>
</div>
</div>
</div>
<!-- Footer -->
<div class="mt-auto pt-2 text-[#2F3E46] opacity-70 flex-shrink-0" style="font-size: clamp(9px, 1.1vw, 13px);">
<p>Based on IT Equipment Audit Report, November 2025</p>
</div>
</div>
<script>
        // Performance Bottlenecks Chart
        const performanceData = [
            {label: "Insufficient RAM", value: 17},
            {label: "Outdated Storage", value: 14}
        ];
        
        const perfContainer = document.getElementById("performance-chart");
        const perfWidth = perfContainer.offsetWidth || 250;
        const perfHeight = perfContainer.offsetHeight || 100;
        
        const performanceChart = d3.select("#performance-chart")
            .append("svg")
            .attr("width", "100%")
            .attr("height", "100%")
            .attr("viewBox", `0 0 ${Math.max(perfWidth, 250)} ${Math.max(perfHeight, 100)}`)
            .attr("preserveAspectRatio", "xMidYMid meet");
            
        const performanceX = d3.scaleLinear()
            .domain([0, 20])
            .range([80, Math.max(perfWidth, 250) - 40]);
            
        const performanceY = d3.scaleBand()
            .domain(performanceData.map(d => d.label))
            .range([10, Math.max(perfHeight, 100) - 10])
            .padding(0.3);
            
        performanceChart.selectAll("rect")
            .data(performanceData)
            .enter()
            .append("rect")
            .attr("x", 80)
            .attr("y", d => performanceY(d.label))
            .attr("width", 0)
            .attr("height", performanceY.bandwidth())
            .attr("fill", "#006D77")
            .attr("rx", 2)
            .attr("ry", 2)
            .transition()
            .duration(1200)
            .delay((d, i) => i * 150)
            .ease(d3.easeCubicOut)
            .attr("width", d => performanceX(d.value) - 80);
            
        performanceChart.selectAll(".value")
            .data(performanceData)
            .enter()
            .append("text")
            .attr("class", "value")
            .attr("x", d => performanceX(d.value) + 5)
            .attr("y", d => performanceY(d.label) + performanceY.bandwidth() / 2)
            .attr("dy", "0.35em")
            .text(d => d.value)
            .attr("fill", "#2F3E46")
            .attr("font-weight", "bold")
            .attr("font-size", Math.min(11, perfHeight * 0.2) + "px")
            .style("opacity", 0)
            .transition()
            .delay((d, i) => i * 150 + 1000)
            .duration(600)
            .style("opacity", 1);
            
        performanceChart.selectAll(".label")
            .data(performanceData)
            .enter()
            .append("text")
            .attr("class", "label")
            .attr("x", 75)
            .attr("y", d => performanceY(d.label) + performanceY.bandwidth() / 2)
            .attr("dy", "0.35em")
            .text(d => d.label.length > 15 ? d.label.substring(0, 12) + "..." : d.label)
            .attr("text-anchor", "end")
            .attr("fill", "#2F3E46")
            .attr("font-size", Math.min(9, perfHeight * 0.18) + "px");
            
        // Security & Compliance Chart
        const securityData = [
            {label: "Unlicensed Software", value: 16},
            {label: "Failing Server UPS", value: 1}
        ];
        
        const secContainer = document.getElementById("security-chart");
        const secWidth = secContainer.offsetWidth || 250;
        const secHeight = secContainer.offsetHeight || 100;
        
        const securityChart = d3.select("#security-chart")
            .append("svg")
            .attr("width", "100%")
            .attr("height", "100%")
            .attr("viewBox", `0 0 ${Math.max(secWidth, 250)} ${Math.max(secHeight, 100)}`)
            .attr("preserveAspectRatio", "xMidYMid meet");
            
        const securityX = d3.scaleLinear()
            .domain([0, 20])
            .range([80, Math.max(secWidth, 250) - 40]);
            
        const securityY = d3.scaleBand()
            .domain(securityData.map(d => d.label))
            .range([10, Math.max(secHeight, 100) - 10])
            .padding(0.3);
            
        securityChart.selectAll("rect")
            .data(securityData)
            .enter()
            .append("rect")
            .attr("x", 80)
            .attr("y", d => securityY(d.label))
            .attr("width", 0)
            .attr("height", securityY.bandwidth())
            .attr("fill", "#EE6C4D")
            .attr("rx", 2)
            .attr("ry", 2)
            .transition()
            .duration(1200)
            .delay((d, i) => i * 150)
            .ease(d3.easeCubicOut)
            .attr("width", d => securityX(d.value) - 80);
            
        securityChart.selectAll(".value")
            .data(securityData)
            .enter()
            .append("text")
            .attr("class", "value")
            .attr("x", d => securityX(d.value) + 5)
            .attr("y", d => securityY(d.label) + securityY.bandwidth() / 2)
            .attr("dy", "0.35em")
            .text(d => d.value)
            .attr("fill", "#2F3E46")
            .attr("font-weight", "bold")
            .attr("font-size", Math.min(11, secHeight * 0.2) + "px")
            .style("opacity", 0)
            .transition()
            .delay((d, i) => i * 150 + 1000)
            .duration(600)
            .style("opacity", 1);
            
        securityChart.selectAll(".label")
            .data(securityData)
            .enter()
            .append("text")
            .attr("class", "label")
            .attr("x", 75)
            .attr("y", d => securityY(d.label) + securityY.bandwidth() / 2)
            .attr("dy", "0.35em")
            .text(d => d.label.length > 15 ? d.label.substring(0, 12) + "..." : d.label)
            .attr("text-anchor", "end")
            .attr("fill", "#2F3E46")
            .attr("font-size", Math.min(9, secHeight * 0.18) + "px");
            
        // Infrastructure Chart
        const infrastructureData = [
            {label: "Display Issues", value: 18},
            {label: "Printer Problems", value: 2},
            {label: "Network Issues", value: 18}
        ];
        
        // Note: Network Issues affect 18 units, with 15 users specifically needing check and fix
        
        const infraContainer = document.getElementById("infrastructure-chart");
        const infraWidth = infraContainer.offsetWidth || 250;
        const infraHeight = infraContainer.offsetHeight || 120;
        
        const infrastructureChart = d3.select("#infrastructure-chart")
            .append("svg")
            .attr("width", "100%")
            .attr("height", "100%")
            .attr("viewBox", `0 0 ${Math.max(infraWidth, 250)} ${Math.max(infraHeight, 120)}`)
            .attr("preserveAspectRatio", "xMidYMid meet");
            
        const infrastructureX = d3.scaleLinear()
            .domain([0, 20])
            .range([80, Math.max(infraWidth, 250) - 40]);
            
        const infrastructureY = d3.scaleBand()
            .domain(infrastructureData.map(d => d.label))
            .range([10, Math.max(infraHeight, 120) - 10])
            .padding(0.25);
            
        infrastructureChart.selectAll("rect")
            .data(infrastructureData)
            .enter()
            .append("rect")
            .attr("x", 80)
            .attr("y", d => infrastructureY(d.label))
            .attr("width", 0)
            .attr("height", infrastructureY.bandwidth())
            .attr("fill", "#F4A261")
            .attr("rx", 2)
            .attr("ry", 2)
            .transition()
            .duration(1200)
            .delay((d, i) => i * 150)
            .ease(d3.easeCubicOut)
            .attr("width", d => infrastructureX(d.value) - 80);
            
        infrastructureChart.selectAll(".value")
            .data(infrastructureData)
            .enter()
            .append("text")
            .attr("class", "value")
            .attr("x", d => infrastructureX(d.value) + 5)
            .attr("y", d => infrastructureY(d.label) + infrastructureY.bandwidth() / 2)
            .attr("dy", "0.35em")
            .text(d => d.value)
            .attr("fill", "#2F3E46")
            .attr("font-weight", "bold")
            .attr("font-size", Math.min(11, infraHeight * 0.15) + "px")
            .style("opacity", 0)
            .transition()
            .delay((d, i) => i * 150 + 1000)
            .duration(600)
            .style("opacity", 1);
            
        infrastructureChart.selectAll(".label")
            .data(infrastructureData)
            .enter()
            .append("text")
            .attr("class", "label")
            .attr("x", 75)
            .attr("y", d => infrastructureY(d.label) + infrastructureY.bandwidth() / 2)
            .attr("dy", "0.35em")
            .text(d => d.label.length > 15 ? d.label.substring(0, 12) + "..." : d.label)
            .attr("text-anchor", "end")
            .attr("fill", "#2F3E46")
            .attr("font-size", Math.min(9, infraHeight * 0.13) + "px");
    </script>
<!-- Navigation -->
<div class="nav-container">
    <button class="nav-button" onclick="goToPage(1)">
        <i class="fas fa-chevron-left"></i> Previous
    </button>
    <div class="page-indicator">Page 2 of 11</div>
    <button class="nav-button" onclick="goToPage(3)">
        Next <i class="fas fa-chevron-right"></i>
    </button>
</div>
<script>
    // Get current page number from URL
    const currentPage = parseInt(window.location.pathname.match(/page_(\d+)\.html/)?.[1] || '2');
    
    // Detect entry direction from sessionStorage
    const entryDirection = sessionStorage.getItem('slideDirection') || 'right';
    const slide = document.querySelector('.slide');
    
    // Apply entry animation based on direction
    if (entryDirection === 'left') {
        slide.classList.add('slide-in-from-left');
    } else {
        slide.classList.add('slide-in-from-right');
    }
    
    // Clear direction after animation
    setTimeout(() => {
        slide.classList.remove('slide-in-from-left', 'slide-in-from-right');
    }, 700);
    
    function goToPage(pageNum) {
        if (pageNum >= 1 && pageNum <= 11 && pageNum !== currentPage) {
            const direction = pageNum > currentPage ? 'right' : 'left';
            
            // Store direction for next page
            sessionStorage.setItem('slideDirection', direction);
            
            if (direction === 'right') {
                slide.classList.add('slide-out-left');
            } else {
                slide.classList.add('slide-out-right');
            }
            
            setTimeout(() => {
                window.location.href = `page_${pageNum}.html`;
            }, 700);
        }
    }
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
            e.preventDefault();
            if (e.key === 'ArrowLeft') {
                goToPage(1);
            } else if (e.key === 'ArrowRight') {
                goToPage(3);
            }
        }
    });
</script>
</body></html>